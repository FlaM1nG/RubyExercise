<script src="{{ asset('js/owl.carousel.min.js') }}" 
        type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
 
        var sync1 = $("#us-img-big");
        var sync2 = $("#us-img-small");
 
        sync1.owlCarousel({
            singleItem : true,
            slideSpeed : 1000,
            navigation: false,
            pagination: true,
            afterAction : syncPosition,
            responsiveRefreshRate : 200,
        });
 
        sync2.owlCarousel({
            items : 5,
            itemsDesktop      : [1600,4],
            itemsDesktopSmall     : [1450,3],
            itemsTablet       : [1200,2],
            itemsMobile       : [479,1],
            navigation: true,
            pagination: false,
            navigationText: ["&lsaquo;","&rsaquo;"],
            responsiveRefreshRate : 100,
            afterInit : function(el){
                el.find(".owl-item").eq(0).addClass("synced");
            }
        });
 
        function syncPosition(el){
            var current = this.currentItem;
            $("#us-img-small")
            .find(".owl-item")
            .removeClass("synced")
            .eq(current)
            .addClass("synced");
    
                if($("#us-img-small").data("owlCarousel") !== undefined){
                  center(current);
                }
        }
 
        $("#us-img-small").on("click", ".owl-item", function(e){
            e.preventDefault();
            var number = $(this).data("owlItem");
            sync1.trigger("owl.goTo",number);
        });
 
        function center(number){
            var sync2visible = sync2.data("owlCarousel").owl.visibleItems;
            var num = number;
            var found = false;
            
            for(var i in sync2visible){
                if(num === sync2visible[i]){
                    var found = true;
                }
            }
 
            if(found===false){
                if(num>sync2visible[sync2visible.length-1]){
                    sync2.trigger("owl.goTo", num - sync2visible.length+2);
                }else{
                    if(num - 1 === -1){
                        num = 0;
                    }
                    sync2.trigger("owl.goTo", num);
                }
            } else if(num === sync2visible[sync2visible.length-1]){
                sync2.trigger("owl.goTo", sync2visible[1]);
            } else if(num === sync2visible[0]){
                sync2.trigger("owl.goTo", num-1);
            }
    
        }
 
    });
</script>
