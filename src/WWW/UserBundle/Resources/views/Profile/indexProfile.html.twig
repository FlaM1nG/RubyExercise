{% extends 'UserBundle:Layouts:layoutProfile.html.twig' %}
{% import 'macros/message.html.twig' as message %}
{% import 'macros/offer.html.twig' as offers %}
{% import 'macros/script.html.twig' as codMenu %}

{% block stylesheets %}
    {{ parent() }}
    
    <link rel="stylesheet" href="{{ asset('css/calendario/fullcalendar.css') }}" />

{% endblock %}

{% block title %}
    Profile
{% endblock %}

{% block alertProfile %}
    
{% endblock %} 


{% block javascriptsHeader %}
    {{ parent() }}

{% endblock %}


{% block bodyProfile %}
    <div class="row us-dataPersonal-row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h3>
                Mis datos personales
                
            </h3>
            <hr/>

            <div class="row us-row-header-public">
                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                    <div class="us-pro-pub-marco">
                        <img class="img-responsive us-pro-public-img"
                             src="{{ asset(usuario.photo.url|default('web/img/userDefault.jpg'),'img') }}"/>
                    </div>
                </div>


                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                    <h2>{{ usuario.username }}</h2>
                    <div class="row off-row-rating">
                        <div class="col-lg-12">
                    <span class="off-vote">
                        <!-- VALORACIONES -->
                        <input id=""
                               class="valoration rating rating-loading"
                               data-show-clear="false"
                               data-show-caption="false"
                               data-display-only="true"
                               type="number"
                               step="1"
                               value="{{ usuario.avgScore }}" />

                        <!-- FIN VALORACIONES -->

                    </span>
                        </div>
                    </div>
                </div>
            </div>

            {% if usuario.name != '' and usuario.surname != '' %}
            <div class="row separacion-superior separacion-inferior us-datos-personales">
                <div class="col-lg-12">
                    <span>Nombre:</span> {{ usuario.name }} {{ usuario.surname }}
                </div>
            </div>
            {% endif %}

            <div class="row us-datos-personales">
                {% if usuario.birthdate != '' %}
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 separacion-inferior">
                    <span>Edad:</span> {{ ('now'|date('Y') - usuario.birthdate|date('Y') - 1) }}
                </div>
                {% endif %}

                {% if usuario.sex != '' %}
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 separacion-inferior">
                    <span>Sexo:</span>
                    {% if usuario.sex == 'f' %}
                        Feminino
                    {% elseif usuario.sex == 'm' %}
                        Masculino
                    {% endif %}
                </div>
                {% endif %}
            </div>

            <div class="row us-datos-personales">
                {% if usuario.email != '' %}
                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12 separacion-inferior">
                    <span>Email:</span> {{ usuario.email }}
                </div>
                {% endif %}

                {% if usuario.phone %}
                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12 separacion-inferior">
                    <span>Teléfono:</span> {{ usuario.prefix }} {{ usuario.phone }}
                </div>
                {% endif %}
            </div>
 
            {% if usuario.defaultaddress is not null %}
            <div class="row us-datos-personales">
                <div class="col-lg-12">
                    <span>Dirección por defecto:</span>
                    <div class="us-dir-public">
                        {{ usuario.defaultaddress.street }} <br>
                        {{ usuario.defaultaddress.zipCode }} - {{ usuario.defaultaddress.region }}
                        ({{ usuario.defaultaddress.city }})
                    </div>

                </div>
            </div>
            {% endif %}

        </div>
        <div class="container">

            <div class="row">
                <div class="col-lg-8 text-center">
                    <h1>Calendario</h1>
                    <p class="lead">Complete with pre-defined file paths that you won't have to change!</p>
                    <div id="calendar-holder" class="col-centered">
                    </div>
                </div>

            </div>
            <!-- /.row -->

            <!-- Modal -->
            <div class="modal fade" id="ModalAdd" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <form class="form-horizontal" method="POST" action="addEvent.php">

                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="myModalLabel">Añadir Evento</h4>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="price" class="col-sm-2 control-label">Precio</label>
                                    <div class="col-sm-10">
                                        <input type="text" name="price" class="form-control" id="price">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="title" class="col-sm-2 control-label">Moneda</label>
                                    <div class="col-sm-10">
                                        <select name="title" class="form-control" id="title">

                                            <option value="€">€ (Euros)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="serviceID" class="col-sm-2 control-label">Servicio</label>
                                    <div class="col-sm-10">
                                        <select name="serviceID" class="form-control" id="serviceID">
                                            <option value="">Elegir</option>
                                            <option style="color:#40E0D0;" value="6">&#9724; Alquiler Turístico</option>
                                            <option style="color:#FF0000;" value="7">&#9724; Casa Compartida </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="start" class="col-sm-2 control-label">Fecha inicio</label>
                                    <div class="col-sm-10">
                                        <input type="text" name="start" class="form-control" id="start" readonly>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="end" class="col-sm-2 control-label">Fecha fin</label>
                                    <div class="col-sm-10">
                                        <input type="text" name="end" class="form-control" id="end" readonly>
                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                                <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>



            <!-- Modal -->
            <div class="modal fade" id="ModalEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <form class="form-horizontal" method="POST" href="{{ path('fullcalendar_delete') }}">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="myModalLabel">Editar Evento</h4>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="price" class="col-sm-2 control-label">Precio</label>
                                    <div class="col-sm-10">
                                        <input type="text" name="price" class="form-control" id="price">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="title" class="col-sm-2 control-label">Moneda</label>
                                    <div class="col-sm-10">
                                        <select name="title" class="form-control" id="title">

                                            <option value="€">€ (Euros)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="serviceID" class="col-sm-2 control-label">Servicio</label>
                                    <div class="col-sm-10">
                                        <select name="serviceID" class="form-control" id="serviceID">
                                            <option value="">Elegir</option>
                                            <option style="color:#40E0D0;" value="6">&#9724; Alquiler Turístico</option>
                                            <option style="color:#FF0000;" value="7">&#9724; Casa Compartida </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <div class="checkbox">
                                            <label class="text-danger"><input type="checkbox"  name="delete"> Borrar evento</label>
                                        </div>
                                    </div>
                                </div>

                                <input type="hidden" name="id" class="form-control" id="id">


                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                                <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
             {% include 'ADesignsCalendarBundle::calendar.html.twig' %}

    </div>
{% endblock %}



{% block javascriptsFooter %}
    {{ parent() }}

    {{ codMenu.scriptUserMenu('.us-dataPersonal-row') }}

    <script type="text/javascript">
        $(document).ready(function(){
            $(function () {
                $('[data-toggle="tooltip"]').tooltip();
            });
        });
    </script>


    <script src="{{ asset('js/starRating/star-rating.js') }}"></script>

    <script>
        $(document).ready( function(){

            $('.valoration').rating({
                displayOnly: true,
            });
        });
    </script>

 
    <script type="text/javascript" src="{{ asset('js/calendario/jquery-2.1.1.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/calendario/jquery-ui.custom.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/calendario/moment.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/calendario/fullcalendar.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/calendario/fullcalendar-lang-all.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/calendario/calendar.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/bootstrap.min.js') }}"></script>


    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>

{% endblock %}
    
