{% extends '::base.html.twig' %}
{% import 'macros/alert.html.twig' as alerts %}


{% block title %}
    Profile
{% endblock %}

{% block nav %}
    {{ parent() }}
    {{ include('nav/menu.html.twig') }}
{% endblock %}

{% block alert %}
    
{% endblock %} 


{% block javascriptsHeader %}
    {{ parent() }}
    {#<script src="{{ asset('js/plugins/canvas-to-blob.min.js') }}" 
        type="text/javascript"></script>
    <!-- sortable.min.js is only needed if you wish to sort / rearrange files in initial preview.
         This must be loaded before fileinput.min.js -->
    <script src="{{ asset('js/plugins/sortable.js') }}" 
        type="text/javascript"></script>
    <!-- purify.min.js is only needed if you wish to purify HTML content in your preview for HTML files.
         This must be loaded before fileinput.min.js -->
    <script src="{{ asset('js/plugins/purify.min.js') }}" 
        type="text/javascript"></script>
    <!-- the main fileinput plugin file -->
    <script src="{{ asset('js/fileinput.min.js') }}"></script>

    <!-- optionally if you need translation for your language then include 
        locale file as mentioned below -->
    <script src="{{ asset('js/locales/es.js') }}"></script>#}
{% endblock %}
      



{% block body %}
<!-- TABULADOR DE PESTAÑAS -->
<div class="container-fluid {#cd-main-content#} us-profile-panel">
    <div id="wrapper">
        <div class="overlaySidebarUser"></div>
    
        <!-- Sidebar -->
        <nav class="navbar navbar-inverse " id="sidebar-wrapper" role="navigation">
            <ul class="nav sidebar-nav">
                <li>
                    <a href="#">Home</a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Team</a>
                </li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Works <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li class="dropdown-header">Dropdown heading</li>
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
                <li>
                    <a href="https://twitter.com/maridlcrmn">Follow me</a>
                </li>
            </ul>
        </nav>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <button type="button" class="hamburger is-closed" data-toggle="offcanvas">
                <span class="hamb-top"></span>
    			<span class="hamb-middle"></span>
				<span class="hamb-bottom"></span>
            </button>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <h1>Fancy Toggle Sidebar Navigation</h1>
                        <p>Bacon ipsum dolor sit amet tri-tip shoulder tenderloin shankle. Bresaola tail pancetta ball tip doner meatloaf corned beef. Kevin pastrami tri-tip prosciutto ham hock pork belly bacon pork loin salami pork chop shank corned beef tenderloin meatball cow. Pork bresaola meatloaf tongue, landjaeger tail andouille strip steak tenderloin sausage chicken tri-tip. Pastrami tri-tip kielbasa sausage porchetta pig sirloin boudin rump meatball andouille chuck tenderloin biltong shank </p>
                        <p>Pig meatloaf bresaola, spare ribs venison short loin rump pork loin drumstick jowl meatball brisket. Landjaeger chicken fatback pork loin doner sirloin cow short ribs hamburger shoulder salami pastrami. Pork swine beef ribs t-bone flank filet mignon, ground round tongue. Tri-tip cow turducken shank beef shoulder bresaola tongue flank leberkas ball tip.</p>
                        <p>Filet mignon brisket pancetta fatback short ribs short loin prosciutto jowl turducken biltong kevin pork chop pork beef ribs bresaola. Tongue beef ribs pastrami boudin. Chicken bresaola kielbasa strip steak biltong. Corned beef pork loin cow pig short ribs boudin bacon pork belly chicken andouille. Filet mignon flank turkey tongue. Turkey ball tip kielbasa pastrami flank tri-tip t-bone kevin landjaeger capicola tail fatback pork loin beef jerky.</p>
                        <p>Chicken ham hock shankle, strip steak ground round meatball pork belly jowl pancetta sausage spare ribs. Pork loin cow salami pork belly. Tri-tip pork loin sausage jerky prosciutto t-bone bresaola frankfurter sirloin pork chop ribeye corned beef chuck. Short loin hamburger tenderloin, landjaeger venison porchetta strip steak turducken pancetta beef cow leberkas sausage beef ribs. Shoulder ham jerky kielbasa. Pig doner short loin pork chop. Short ribs frankfurter rump meatloaf.</p>
                        <p>Filet mignon biltong chuck pork belly, corned beef ground round ribeye short loin rump swine. Hamburger drumstick turkey, shank rump biltong pork loin jowl sausage chicken. Rump pork belly fatback ball tip swine doner pig. Salami jerky cow, boudin pork chop sausage tongue andouille turkey.</p>                         
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->
                
</div>

{% endblock %}

{% block javascriptsFooter %}
    {{ parent() }}
    <script>
        $(document).ready(function () {
            var trigger = $('.hamburger'),
                overlay = $('.overlaySidebarUser'),
               isClosed = false;

              trigger.click(function () {
                hamburger_cross();      
              });

              function hamburger_cross() {

                if (isClosed == true) {     
                  trigger.removeClass('is-open');
                  trigger.addClass('is-closed');
                  isClosed = false;
                } else {   
                  trigger.removeClass('is-closed');
                  trigger.addClass('is-open');
                  isClosed = true;
                }
            }

            $('[data-toggle="offcanvas"]').click(function () {
                  $('#wrapper').toggleClass('toggled');
            });  
        });
        
        
        $(document).scroll(function(e){
            var scrollTop = $(document).scrollTop();
            if(scrollTop > $('#menuAdministracion').height()){
                //console.log(scrollTop);
                $('#sidebar-wrapper').css("position","fixed");
                $('#sidebar-wrapper').css("top","50px");
            } else {
                $('#sidebar-wrapper').css("position","absolute");
                $('#sidebar-wrapper').css("top","inherit");
            }
        });
    </script>
    
    <script>
        $('#myTabs a').click(function (e) {
            e.preventDefault();
            $(this).tab('show');
        });
    </script>
    
    <script type="text/javascript">
    $(document).scroll(function(e){
        var scrollTop = $(document).scrollTop();
        if(scrollTop > $('#menuAdministracion').height()){
            //console.log(scrollTop);
            $('#cbp-hrmenu').css("position","fixed");
            $('#cbp-hrmenu').css("top","0");
            $('#cbp-hrmenu').css("z-index","999");
        } else {
            $('#cbp-hrmenu').css("position","relative");
        }
    });
    
    </script>
    
    <script type="text/javascript">
        //Previsualización de las imágenes
        function archivo(evt) { 
                  var files = evt.target.files; // FileList object
             
                  // Obtenemos la imagen del campo "file".
                  for (var i = 0 ; i< files.length; i++) {
                        var f = files[i];
             
                    var reader = new FileReader();
             
                    reader.onload = (function(theFile) {
                        return function(e) {
                          // Insertamos la imagen
                         document.getElementById("profileImage").innerHTML = ['<img height="100" widht="100" src="', e.target.result,'" title="', escape(theFile.name), '"/>'].join('');
                        };
                    })(f);
             
                    reader.readAsDataURL(f);
                  }
              }
             
{#              document.getElementById('profilePhoto_fileImage').addEventListener('change', archivo, false);#}

    </script>
    
    <script type="text/javascript">


        $(document).ready(function() {
            
            var $collectionHolder;

            // setup an "add a tag" link
            var $addTagLink = $('<button class="add_tag_link">Nueva Dirección</button>');
            var $newLinkLi = $('<li></li>').append($addTagLink);

            jQuery(document).ready(function() {
                // Get the ul that holds the collection of tags
                $collectionHolder = $('ul.newAddress');

                // add the "add a tag" anchor and li to the tags ul
                $collectionHolder.append($newLinkLi);

                // count the current form inputs we have (e.g. 2), use that as the new
                // index when inserting a new item (e.g. 2)
                $collectionHolder.data('index', $collectionHolder.find(':input').length);

                $addTagLink.on('click', function(e) {
                    // prevent the link from creating a "#" on the URL
                    e.preventDefault();

                    // add a new tag form (see next code block)
                    addTagForm($collectionHolder, $newLinkLi);
                    
                    $('#profileAddress_deleteAddresses').css('display','none');
                    //Solo se permite añadir una dirección de una vez, 
                    //así que ocultamos el botón
                    $('.add_tag_link').css('display','none');
                    //Mostramos el botón de guardar una dirección nueva
                    $('#profileAddress_addAddress').css('display','block');
                });
            });
            
            function addTagForm($collectionHolder, $newLinkLi) {
                // Get the data-prototype explained earlier
                var prototype = $collectionHolder.data('prototype');

                // get the new index
                var index = $collectionHolder.data('index');

                // Replace '__name__' in the prototype's HTML to
                // instead be a number based on how many items we have
                var newForm = prototype.replace(/__name__/g, index);

                // increase the index with one for the next item
                $collectionHolder.data('index', index + 1);

                // Display the form in the page in an li, before the "Add a tag" link li
                var $newFormLi = $('<li></li>').append(newForm);
                $newLinkLi.before($newFormLi);
                
            }
           
            
            //$(document).on('click','.checkDeleteAddress', deleteAddresses);
            $(document).on('click','.add_tag_link',showHiddenButtonAdd);
            $(document).on('click','.newMessageButton', showFormNewMessage);
            $(document).on('click','.buttonDeleteMessage', deleteMessage);
            
            
            
            function deleteMessage(e){
                e.stopPropagation();
                //e.preventDefault();
                var arrayName = $(this).attr('id').split('_');
                var posArray = arrayName[2];
                var typeMessage = arrayName[1];
                
                $('#profileMessage_idRemove').val(posArray);
                $('#profileMessage_fromTo').val(typeMessage);
            }
            
            function showFormNewMessage(e){
                e.preventDefault();
                
                if($('.containeMessages').is(':visible')){
                    $('.containeMessages').hide();
                    $('#message_to, #message_message').attr('required',true);
                    $('.newMessage').show();
                    
                }else{
                    
                    $('.containeMessages').show();
                    $('#message_to, #message_message').attr('required',false);
                    $('.newMessage').hide();
                }
            }
            
            function editAddress(e){
                e.preventDefault();
                
                $('.dataAddress').css('display','none');
                $(this).parent().next().css('display','block');
                $('.add_tag_link').css('display','none');
                $('.editAddress').css('display','block');
                $('#profileUser_deleteAddresses').css('display','none');
            }
            
            function showHiddenButtonAdd(e){
                
            }
        });


    </script>
 
    <script type="text/javascript" src="{{ asset('js/profile.js') }}">  </script>
    
    
    <script src="{{ asset('js/plugins/canvas-to-blob.min.js') }}" 
        type="text/javascript"></script>
    <!-- sortable.min.js is only needed if you wish to sort / rearrange files in initial preview.
         This must be loaded before fileinput.min.js -->
    <script src="{{ asset('js/plugins/sortable.js') }}" 
        type="text/javascript"></script>
    <!-- purify.min.js is only needed if you wish to purify HTML content in your preview for HTML files.
         This must be loaded before fileinput.min.js -->
    <script src="{{ asset('js/plugins/purify.min.js') }}" 
        type="text/javascript"></script>
    <!-- the main fileinput plugin file -->
    <script src="{{ asset('js/fileinput.js') }}"></script>

    <!-- optionally if you need translation for your language then include 
        locale file as mentioned below -->
    <script src="{{ asset('js/locales/es.js') }}"></script>
    
    <script>
        $(document).ready(function(){
            $("#profileUser_fileImage").fileinput({
                showUpload: false, 
                previewFileType: 'image',
                initialPreview: [
                    'http://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/FullMoon2010.jpg/631px-FullMoon2010.jpg',
                    'http://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Earth_Eastern_Hemisphere.jpg/600px-Earth_Eastern_Hemisphere.jpg'
                ],
                initialPreviewAsData: true,
                initialPreviewConfig: [
                    {caption: "Moon.jpg", size: 930321, width: "120px", key: 1},
                    {caption: "Earth.jpg", size: 1218822, width: "120px", key: 2}
                ],
                deleteUrl: "/site/file-delete",
                overwriteInitial: false,
                maxFileSize: 100,
                initialCaption: "Selecciona tu imagen de perfil"
            });
        });
    </script>
    
    {#<script>
        $(function () {
            $('.navbar-toggler').on('click', function(event) {
                event.preventDefault();
                $(this).closest('.navbar-minimal').toggleClass('open');
            });
        });
    </script>#}
    
{% endblock %}
