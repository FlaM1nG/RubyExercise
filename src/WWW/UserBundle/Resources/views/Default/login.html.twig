{% extends '::base.html.twig' %}

{% block title %}
    Login
{% endblock %}

{% block nav %}
    {{ parent() }}
    {{ include('nav/menu.html.twig') }}
    
{% endblock %}

{% block alert %}
    {% for flash_message in app.session.flashbag.get('messageSuccess') %}
       {{  alerts.alert('alert-success', flash_message, null) }}
    {% endfor %}
    
    {% for flash_message in app.session.flashbag.get('messageFail') %}
        {{  alerts.alert('alert-warning', flash_message, null) }}
    {% endfor %}

{% endblock %}


{% block body %}
    
    <div class="container cd-main-content us-login-cont">
        <h1>
            Acceder a What Want Web
        </h1>
        <hr>
    </div>
   {% if error %}
    <div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
{% endif %}
    
    {{ form_start(formulario) }}

    <div class="container cd-main-content us-login-cont">

        <div class="row us-login-register">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <a href="{{ path('user_register') }}">
                    <p>
                        ¿No tienes cuenta? Regístrate
                    </p>
                </a>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            {{ form_label(formulario._username) }}
            {{ form_widget(formulario._username) }}
            </div>
        </div>
            
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            {{ form_label(formulario._password) }}
            {{ form_widget(formulario._password) }}
            </div>
        </div>
            
            
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            {% if app.session.get('intentoLogin') > 3 %}
                {{form_widget(formulario.captcha)}}
            {% endif %}    
            </div>
        </div>

        <div class="row us-login-forgot">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <a href="{{ path('user_forgot') }}">
                    <p>
                        ¿Has olvidado tu contraseña?
                    </p>
                </a>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            {{ form_row(formulario.enviar)}}   
            </div>
        </div>
    
        
        {{ form(formulario._token)}}
    </div>
    

{% endblock %}
